(this["webpackJsonpbelajar-react-redux"]=this["webpackJsonpbelajar-react-redux"]||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},59:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),s=a.n(o),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var i=a(11),u=a(8),m=a(64),h=a(65),d=a(9),p=a(10),f=a(6),E=a(14),v=a(12),g=a(1),b=a.n(g),S=a(63),w=a(7),k=a.n(w),y=(a(59),function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={nama:"",alamat:"",users:[],formStatus:!0},n.handleFormSubmit=n.handleFormSubmit.bind(Object(f.a)(n)),n.onInputChange=n.onInputChange.bind(Object(f.a)(n)),n.deleteUser=n.deleteUser.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentWillMount",value:function(){var e=this;k.a.get("http://localhost:4000/users/").then((function(t){e.props.getAllUsers(t.data),e.setState({users:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentWillReceiveProps",value:function(e){e.users!==this.state.users&&this.setState({users:e.users})}},{key:"deleteUser",value:function(e,t){e.preventDefault();var a=this;k.a.delete("http://localhost:4000/users/"+t).then((function(e){for(var n=a.state.users,r=0;r<n.length;r++)t===n[r].id&&n.splice(r,1);a.props.deleteUser(n)})).catch((function(e){console.log(e)}))}},{key:"onInputChange",value:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this;if(this.state.nama&&this.state.alamat){var a=t.state.users.length,n=0===a?0:t.state.users[a-1].id;k.a.post("http://localhost:4000/users/",{id:this.state.users.length>0?n+1:1,nama:this.state.nama,alamat:this.state.alamat}).then((function(e){t.props.saveUser(e.data),t.setState({nama:"",alamat:""})})).catch((function(e){console.log(e)}))}else t.setState({formStatus:!1})}},{key:"render",value:function(){var e=this.state,t=e.nama,a=e.alamat,n=this;return r.a.createElement("div",{className:"container"},r.a.createElement("table",{id:"users"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Nama"),r.a.createElement("th",null,"Alamat"),r.a.createElement("th",null,"Aksi"))),r.a.createElement("tbody",null,this.state.users.length>0?this.state.users.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.nama),r.a.createElement("td",null,e.alamat),r.a.createElement("td",null,r.a.createElement("a",{href:"/",onClick:function(t){return n.deleteUser(t,e.id)}}," Hapus ")," | ",r.a.createElement(S.a,{to:"/edit/".concat(e.id)}," Edit ")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"Belum ada user")))),r.a.createElement("div",null,r.a.createElement("h3",null,"Input data user baru"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",name:"nama",value:t,placeholder:"Nama",onChange:this.onInputChange}),r.a.createElement("br",null),r.a.createElement("textarea",{name:"alamat",value:a,placeholder:"Alamat",onChange:this.onInputChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Simpan"}))),!this.state.formStatus&&r.a.createElement("div",{className:"warning-message"},"Form tidak boleh kosong"))}}]),a}(n.Component));y.protoTypes={users:b.a.object,saveUser:b.a.func,getAllUsers:b.a.func,deleteUser:b.a.func};var U=y,O=Object(u.b)((function(e){return{users:e}}),(function(e){return{saveUser:function(t){return e(function(e){return{type:"ADD_USER",data:e}}(t))},getAllUsers:function(t){return e(function(e){return{type:"FETCH_USERS",data:e}}(t))},deleteUser:function(t){return e(function(e){return{type:"DELETE_USER",data:e}}(t))}}}))(U),_=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={id:"",nama:"",alamat:"",user:"",formStatus:!0,formSuccess:!1},n.handleFormSubmit=n.handleFormSubmit.bind(Object(f.a)(n)),n.onInputChange=n.onInputChange.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this;this.state.nama&&this.state.alamat?k.a.put("http://localhost:4000/users/"+this.state.id,{nama:this.state.nama,alamat:this.state.alamat}).then((function(e){t.setState({formSuccess:!0}),t.props.dispatch({type:"UPDATE_AN_USER",data:e.data})})).catch((function(e){console.log(e)})):t.setState({formStatus:!1})}},{key:"componentDidMount",value:function(){var e=this;k.a.get("http://localhost:4000/users/"+this.props.match.params.userId).then((function(t){e.setState({id:t.data.id,nama:t.data.nama,alamat:t.data.alamat,user:{nama:t.data.nama,alamat:t.data.alamat}}),e.props.dispatch({type:"GET_AN_USER"})})).catch((function(e){console.log(e)}))}},{key:"onInputChange",value:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"render",value:function(){var e=this.state,t=e.nama,a=e.alamat;return r.a.createElement("div",null,r.a.createElement("h3",null,"Edit data user"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",name:"nama",value:t,placeholder:"Nama",onChange:this.onInputChange}),r.a.createElement("br",null),r.a.createElement("textarea",{name:"alamat",value:a,placeholder:"Alamat",onChange:this.onInputChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Simpan"})),this.state.formSuccess&&r.a.createElement("div",{className:"success-message"},"Data berhasil diubah. Ingin ",r.a.createElement(S.a,{to:"/"}," kembali "),"?"),!this.state.formStatus&&r.a.createElement("div",{className:"warning-message"},"Form tidak boleh kosong"))}}]),a}(n.Component),j=Object(u.b)()(_),C=function(e){var t=e.store;return r.a.createElement(u.a,{store:t},r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(h.a,{exact:!0,path:"/",component:O}),r.a.createElement(h.a,{path:"/edit/:userId?",component:j}))))},I=a(18),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("action : ",t),t.type){case"ADD_USER":return[].concat(Object(I.a)(e),[t.data]);case"DELETE_USER":var a=t.data,n=a.map((function(e){return{id:e.id,nama:e.nama,alamat:e.alamat}}));return n;case"FETCH_USERS":return t.data;case"UPDATE_AN_USER":return[].concat(Object(I.a)(e),[t.data]);default:return e}},N=Object(i.b)(D,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(r.a.createElement(C,{store:N}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");l?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):c(e)}))}}()}},[[32,1,2]]]);
//# sourceMappingURL=main.409bc656.chunk.js.map